{"version":3,"sources":["../../../../../../apps/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../../../apps/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../apps/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../apps/frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../apps/frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../apps/frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../apps/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../apps/frontend/app/login/page.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { z } from \"zod\";\nimport Image from \"next/image\";\nimport { setToken, decodeToken } from \"../lib/auth\";\n\nconst loginSchema = z.object({\n    email: z.string().email(\"Enter a valid email address\"),\n    password: z.string().min(6, \"Password must be at least 6 characters long\"),\n});\n\nexport default function LoginPage() {\n    const router = useRouter();\n\n    const [form, setForm] = useState({ email: \"\", password: \"\" });\n    const [errors, setErrors] = useState({});\n    const [loading, setLoading] = useState(false);\n    const [serverMsg, setServerMsg] = useState(\"\");\n\n    function handleChange(e) {\n        setForm((f) => ({ ...f, [e.target.name]: e.target.value }));\n        if (errors[e.target.name]) {\n            setErrors((prev) => ({ ...prev, [e.target.name]: undefined }));\n        }\n    }\n\n    async function onSubmit(e) {\n        e.preventDefault();\n        setErrors({});\n        setServerMsg(\"\");\n\n        const parsed = loginSchema.safeParse(form);\n        if (!parsed.success) {\n            const fieldErrors = {};\n            parsed.error.errors.forEach((err) => {\n                fieldErrors[err.path[0]] = err.message;\n            });\n            setErrors(fieldErrors);\n            return;\n        }\n\n        try {\n            setLoading(true);\n            const baseUrl = (process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:8080\").replace(/\\/$/, \"\");\n            const res = await fetch(`${baseUrl}/auth/login`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(form),\n            });\n\n            const data = await res.json();\n            if (!data.ok) {\n                setServerMsg(data.error || \"Login failed\");\n                return;\n            }\n\n            setToken(data.token);\n            const decoded = decodeToken();\n            const userId = decoded?.userId || decoded?.id || decoded?.sub || null;\n            if (userId) localStorage.setItem(\"userId\", String(userId));\n\n            router.push(\"/trade\");\n        } catch (err) {\n            setServerMsg(\"Something went wrong. Please try again.\");\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return (\n        <main className=\"min-h-screen w-full flex items-center justify-center bg-[#09090b] text-neutral-200 p-4\">\n            <div className=\"w-full max-w-[400px] space-y-6\">\n\n                {/* Header */}\n                <div className=\"flex flex-col items-center text-center space-y-2\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <Image src=\"/logo.svg\" alt=\"Logo\" className=\"invert opacity-90\" width={150} height={100} />\n                    </div>\n                    <h1 className=\"text-2xl font-bold tracking-tight text-white\">Welcome back</h1>\n                    <p className=\"text-sm text-neutral-400\">Enter your details to access your portfolio.</p>\n                </div>\n\n                {/* Card */}\n                <div className=\"bg-[#111] border border-white/10 rounded-2xl p-6 md:p-8 shadow-2xl shadow-black/50\">\n                    <form onSubmit={onSubmit} className=\"space-y-5\">\n\n                        <div>\n                            <label className=\"block text-xs font-medium text-neutral-400 mb-1.5 ml-1\">Email</label>\n                            <div className={`flex items-center px-3 py-2.5 rounded-lg border transition-all ${errors.email ? \"bg-rose-950/10 border-rose-500/50\" : \"bg-[#09090b] border-white/10 focus-within:border-white/30\"}`}>\n                                <input\n                                    name=\"email\"\n                                    type=\"email\"\n                                    value={form.email}\n                                    onChange={handleChange}\n                                    className=\"bg-transparent text-sm w-full outline-none text-neutral-200 placeholder:text-neutral-600\"\n                                    placeholder=\"name@example.com\"\n                                    autoComplete=\"email\"\n                                />\n                            </div>\n                            {errors.email && <p className=\"text-xs text-rose-400 mt-1.5 ml-1\">{errors.email}</p>}\n                        </div>\n\n                        <div>\n                            <label className=\"block text-xs font-medium text-neutral-400 mb-1.5 ml-1\">Password</label>\n                            <div className={`flex items-center px-3 py-2.5 rounded-lg border transition-all ${errors.password ? \"bg-rose-950/10 border-rose-500/50\" : \"bg-[#09090b] border-white/10 focus-within:border-white/30\"}`}>\n                                <input\n                                    name=\"password\"\n                                    type=\"password\"\n                                    value={form.password}\n                                    onChange={handleChange}\n                                    className=\"bg-transparent text-sm w-full outline-none text-neutral-200 placeholder:text-neutral-600\"\n                                    placeholder=\"••••••••\"\n                                    autoComplete=\"current-password\"\n                                />\n                            </div>\n                            {errors.password && <p className=\"text-xs text-rose-400 mt-1.5 ml-1\">{errors.password}</p>}\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full py-3 text-sm font-bold bg-white text-black rounded-lg hover:bg-neutral-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-[0.98] mt-2\"\n                        >\n                            {loading ? \"Signing in...\" : \"Sign In\"}\n                        </button>\n                    </form>\n\n                    {serverMsg && (\n                        <div className=\"mt-4 p-3 rounded-lg bg-rose-500/10 border border-rose-500/20 text-rose-400 text-sm text-center\">\n                            {serverMsg}\n                        </div>\n                    )}\n                </div>\n\n                {/* Footer Link */}\n                <p className=\"text-center text-sm text-neutral-500\">\n                    Don’t have an account?{\" \"}\n                    <button onClick={() => router.push(\"/register\")} className=\"text-white hover:underline underline-offset-4 decoration-neutral-700 transition-all\">\n                        Sign up\n                    </button>\n                </p>\n            </div>\n        </main>\n    );\n}"],"names":["module","exports","require","vendored","ReactDOM","ReactJsxRuntime","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6]}