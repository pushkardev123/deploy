{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/pushkardev/Development/numatix/apps/frontend/app/lib/auth.js"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\nconst TOKEN_KEY = \"token\";\nconst USER_ID_KEY = \"userId\";\n\nexport function setToken(token) {\n    if (typeof window === \"undefined\") return;\n    localStorage.setItem(TOKEN_KEY, token);\n}\n\nexport function getToken() {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(TOKEN_KEY);\n}\n\nexport function setUserId(userId) {\n    if (typeof window === \"undefined\") return;\n    if (!userId) return;\n    localStorage.setItem(USER_ID_KEY, String(userId));\n}\n\nexport function getUserId() {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(USER_ID_KEY);\n}\n\nexport function clearAuth() {\n    if (typeof window === \"undefined\") return;\n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(USER_ID_KEY);\n}\n\n// Decode JWT payload (frontend-only, no verification)\nexport function decodeToken(tokenOverride) {\n    if (typeof window === \"undefined\") return null;\n\n    const token = tokenOverride || localStorage.getItem(\"token\");\n    if (!token) return null;\n\n    try {\n        return jwtDecode(token);\n    } catch (err) {\n        console.error(\"Failed to decode token:\", err);\n        return null;\n    }\n}"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AACA,MAAM,YAAY;AAClB,MAAM,cAAc;AAEb,SAAS,SAAS,KAAK;IAC1B;;IACA,aAAa,OAAO,CAAC,WAAW;AACpC;AAEO,SAAS;IACZ;;IACA,OAAO,aAAa,OAAO,CAAC;AAChC;AAEO,SAAS,UAAU,MAAM;IAC5B;;IACA,IAAI,CAAC,QAAQ;IACb,aAAa,OAAO,CAAC,aAAa,OAAO;AAC7C;AAEO,SAAS;IACZ;;IACA,OAAO,aAAa,OAAO,CAAC;AAChC;AAEO,SAAS;IACZ;;IACA,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;AAC5B;AAGO,SAAS,YAAY,aAAa;IACrC;;IAEA,MAAM,QAAQ,iBAAiB,aAAa,OAAO,CAAC;IACpD,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI;QACA,OAAO,IAAA,sKAAS,EAAC;IACrB,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO;IACX;AACJ"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/pushkardev/Development/numatix/apps/frontend/app/register/page.js"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { z } from \"zod\";\nimport Image from \"next/image\"; // Assuming you want to show the logo like the main app\nimport { setToken, decodeToken } from \"../lib/auth\";\nimport Link from \"next/link\";\n\n// Signup schema: email + password + Binance keys\nconst signupSchema = z\n    .object({\n        email: z.string().email(\"Enter a valid email address\"),\n        password: z.string().min(6, \"Password must be at least 6 characters long\"),\n        confirmPassword: z.string().min(6, \"Confirm your password\"),\n        binanceApiKey: z.string().min(1, \"Binance API key is required\"),\n        binanceSecretKey: z.string().min(1, \"Binance secret key is required\"),\n    })\n    .refine((v) => v.password === v.confirmPassword, {\n        message: \"Passwords do not match\",\n        path: [\"confirmPassword\"],\n    });\n\nexport default function SignupPage() {\n    const router = useRouter();\n\n    const [form, setForm] = useState({\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n        binanceApiKey: \"\",\n        binanceSecretKey: \"\",\n    });\n    const [errors, setErrors] = useState({});\n    const [loading, setLoading] = useState(false);\n    const [serverMsg, setServerMsg] = useState(\"\");\n\n    function handleChange(e) {\n        setForm((f) => ({ ...f, [e.target.name]: e.target.value }));\n        // Clear specific field error when user types\n        if (errors[e.target.name]) {\n            setErrors((prev) => ({ ...prev, [e.target.name]: undefined }));\n        }\n    }\n\n    async function onSubmit(e) {\n        e.preventDefault();\n        setErrors({});\n        setServerMsg(\"\");\n\n        const parsed = signupSchema.safeParse(form);\n        if (!parsed.success) {\n            const fieldErrors = {};\n            parsed.error.issues.forEach((err) => {\n                const key = err.path?.[0] || \"form\";\n                fieldErrors[key] = err.message;\n            });\n            setErrors(fieldErrors);\n            return;\n        }\n\n        try {\n            setLoading(true);\n            const baseUrl = (process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:8080\").replace(/\\/$/, \"\");\n            const res = await fetch(`${baseUrl}/auth/register`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({\n                    email: form.email,\n                    password: form.password,\n                    binanceApiKey: form.binanceApiKey,\n                    binanceSecretKey: form.binanceSecretKey,\n                }),\n            });\n\n            const data = await res.json();\n            if (!data.ok) {\n                setServerMsg(data.error || \"Sign up failed\");\n                return;\n            }\n\n            setToken(data.token);\n            const decoded = decodeToken();\n            const userId = decoded?.userId || decoded?.id || decoded?.sub || null;\n            if (userId) localStorage.setItem(\"userId\", String(userId));\n\n            router.push(\"/trade\");\n        } catch (err) {\n            setServerMsg(\"Something went wrong. Please try again.\");\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    // Shared Input Component for consistency\n    const InputField = ({ label, name, type = \"text\", placeholder }) => (\n        <div>\n            <label className=\"block text-xs font-medium text-neutral-400 mb-1.5 ml-1\">\n                {label}\n            </label>\n            <div className={`flex items-center px-3 py-2.5 rounded-lg border transition-all ${errors[name]\n                ? \"bg-rose-950/10 border-rose-500/50 focus-within:border-rose-500\"\n                : \"bg-[#09090b] border-white/10 focus-within:border-white/30\"\n                }`}>\n                <input\n                    name={name}\n                    type={type}\n                    value={form[name]}\n                    onChange={handleChange}\n                    className=\"bg-transparent text-sm w-full outline-none text-neutral-200 placeholder:text-neutral-600\"\n                    placeholder={placeholder}\n                    autoComplete=\"off\"\n                />\n            </div>\n            {errors[name] && <p className=\"text-xs text-rose-400 mt-1.5 ml-1\">{errors[name]}</p>}\n        </div>\n    );\n\n    return (\n        <main className=\"min-h-screen w-full flex items-center justify-center bg-[#09090b] text-neutral-200 p-4\">\n            <div className=\"w-full max-w-md space-y-6\">\n\n                {/* Header / Logo */}\n                <div className=\"flex flex-col items-center text-center space-y-2\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <Image src=\"/logo.svg\" alt=\"Logo\" className=\"invert opacity-90\" width={150} height={100} />\n                    </div>\n                    <h1 className=\"text-2xl font-bold tracking-tight text-white\">Create an account</h1>\n                    <p className=\"text-sm text-neutral-400\">Enter your Binance Testnet keys to get started.</p>\n                </div>\n\n                {/* Card */}\n                <div className=\"bg-[#111] border border-white/10 rounded-2xl p-6 md:p-8 shadow-2xl shadow-black/50\">\n                    <form onSubmit={onSubmit} className=\"space-y-5\">\n                        <InputField label=\"Email\" name=\"email\" type=\"email\" placeholder=\"name@example.com\" />\n\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <InputField label=\"Password\" name=\"password\" type=\"password\" placeholder=\"••••••\" />\n                            <InputField label=\"Confirm\" name=\"confirmPassword\" type=\"password\" placeholder=\"••••••\" />\n                        </div>\n\n                        <div className=\"space-y-5 pt-2\">\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"h-px bg-white/10 flex-1\"></div>\n                                <span className=\"text-[10px] uppercase tracking-widest text-neutral-500 font-semibold\">API Keys</span>\n                                <div className=\"h-px bg-white/10 flex-1\"></div>\n                            </div>\n                            <InputField label=\"Binance API Key\" name=\"binanceApiKey\" placeholder=\"Paste your API Key\" />\n                            <InputField label=\"Binance Secret Key\" name=\"binanceSecretKey\" type=\"password\" placeholder=\"Paste your Secret Key\" />\n                            <Link href=\"https://testnet.binance.vision\" target=\"_blank\" className=\"text-xs text-neutral-400 hover:underline underline-offset-4 decoration-neutral-700 transition-all\">\n                                Don't have Testnet keys? Create them here.\n                            </Link>\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full py-3 text-sm font-bold bg-white text-black rounded-lg hover:bg-neutral-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-[0.98] mt-2\"\n                        >\n                            {loading ? \"Creating account...\" : \"Sign Up\"}\n                        </button>\n                    </form>\n\n                    {serverMsg && (\n                        <div className=\"mt-4 p-3 rounded-lg bg-rose-500/10 border border-rose-500/20 text-rose-400 text-sm text-center\">\n                            {serverMsg}\n                        </div>\n                    )}\n                </div>\n\n                {/* Footer Link */}\n                <p className=\"text-center text-sm text-neutral-500\">\n                    Already have an account?{\" \"}\n                    <button onClick={() => router.push(\"/login\")} className=\"text-white hover:underline underline-offset-4 decoration-neutral-700 transition-all\">\n                        Sign in\n                    </button>\n                </p>\n            </div>\n        </main>\n    );\n}"],"names":[],"mappings":"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"}}]
}