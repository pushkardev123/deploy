{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/pushkardev/Development/numatix/apps/frontend/app/lib/auth.js"],"sourcesContent":["import { jwtDecode } from \"jwt-decode\";\nconst TOKEN_KEY = \"token\";\nconst USER_ID_KEY = \"userId\";\n\nexport function setToken(token) {\n    if (typeof window === \"undefined\") return;\n    localStorage.setItem(TOKEN_KEY, token);\n}\n\nexport function getToken() {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(TOKEN_KEY);\n}\n\nexport function setUserId(userId) {\n    if (typeof window === \"undefined\") return;\n    if (!userId) return;\n    localStorage.setItem(USER_ID_KEY, String(userId));\n}\n\nexport function getUserId() {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(USER_ID_KEY);\n}\n\nexport function clearAuth() {\n    if (typeof window === \"undefined\") return;\n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(USER_ID_KEY);\n}\n\n// Decode JWT payload (frontend-only, no verification)\nexport function decodeToken(tokenOverride) {\n    if (typeof window === \"undefined\") return null;\n\n    const token = tokenOverride || localStorage.getItem(\"token\");\n    if (!token) return null;\n\n    try {\n        return jwtDecode(token);\n    } catch (err) {\n        console.error(\"Failed to decode token:\", err);\n        return null;\n    }\n}"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AACA,MAAM,YAAY;AAClB,MAAM,cAAc;AAEb,SAAS,SAAS,KAAK;IAC1B,wCAAmC;;;AAEvC;AAEO,SAAS;IACZ,wCAAmC,OAAO;;;AAE9C;AAEO,SAAS,UAAU,MAAM;IAC5B,wCAAmC;;;AAGvC;AAEO,SAAS;IACZ,wCAAmC,OAAO;;;AAE9C;AAEO,SAAS;IACZ,wCAAmC;;;AAGvC;AAGO,SAAS,YAAY,aAAa;IACrC,wCAAmC,OAAO;;;IAE1C,MAAM;AASV"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/pushkardev/Development/numatix/apps/frontend/app/login/page.js"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { z } from \"zod\";\nimport Image from \"next/image\";\nimport { setToken, decodeToken } from \"../lib/auth\";\n\nconst loginSchema = z.object({\n    email: z.string().email(\"Enter a valid email address\"),\n    password: z.string().min(6, \"Password must be at least 6 characters long\"),\n});\n\nexport default function LoginPage() {\n    const router = useRouter();\n\n    const [form, setForm] = useState({ email: \"\", password: \"\" });\n    const [errors, setErrors] = useState({});\n    const [loading, setLoading] = useState(false);\n    const [serverMsg, setServerMsg] = useState(\"\");\n\n    function handleChange(e) {\n        setForm((f) => ({ ...f, [e.target.name]: e.target.value }));\n        if (errors[e.target.name]) {\n            setErrors((prev) => ({ ...prev, [e.target.name]: undefined }));\n        }\n    }\n\n    async function onSubmit(e) {\n        e.preventDefault();\n        setErrors({});\n        setServerMsg(\"\");\n\n        const parsed = loginSchema.safeParse(form);\n        if (!parsed.success) {\n            const fieldErrors = {};\n            parsed.error.errors.forEach((err) => {\n                fieldErrors[err.path[0]] = err.message;\n            });\n            setErrors(fieldErrors);\n            return;\n        }\n\n        try {\n            setLoading(true);\n            const baseUrl = (process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:8080\").replace(/\\/$/, \"\");\n            const res = await fetch(`${baseUrl}/auth/login`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(form),\n            });\n\n            const data = await res.json();\n            if (!data.ok) {\n                setServerMsg(data.error || \"Login failed\");\n                return;\n            }\n\n            setToken(data.token);\n            const decoded = decodeToken();\n            const userId = decoded?.userId || decoded?.id || decoded?.sub || null;\n            if (userId) localStorage.setItem(\"userId\", String(userId));\n\n            router.push(\"/trade\");\n        } catch (err) {\n            setServerMsg(\"Something went wrong. Please try again.\");\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return (\n        <main className=\"min-h-screen w-full flex items-center justify-center bg-[#09090b] text-neutral-200 p-4\">\n            <div className=\"w-full max-w-[400px] space-y-6\">\n\n                {/* Header */}\n                <div className=\"flex flex-col items-center text-center space-y-2\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <Image src=\"/logo.svg\" alt=\"Logo\" className=\"invert opacity-90\" width={150} height={100} />\n                    </div>\n                    <h1 className=\"text-2xl font-bold tracking-tight text-white\">Welcome back</h1>\n                    <p className=\"text-sm text-neutral-400\">Enter your details to access your portfolio.</p>\n                </div>\n\n                {/* Card */}\n                <div className=\"bg-[#111] border border-white/10 rounded-2xl p-6 md:p-8 shadow-2xl shadow-black/50\">\n                    <form onSubmit={onSubmit} className=\"space-y-5\">\n\n                        <div>\n                            <label className=\"block text-xs font-medium text-neutral-400 mb-1.5 ml-1\">Email</label>\n                            <div className={`flex items-center px-3 py-2.5 rounded-lg border transition-all ${errors.email ? \"bg-rose-950/10 border-rose-500/50\" : \"bg-[#09090b] border-white/10 focus-within:border-white/30\"}`}>\n                                <input\n                                    name=\"email\"\n                                    type=\"email\"\n                                    value={form.email}\n                                    onChange={handleChange}\n                                    className=\"bg-transparent text-sm w-full outline-none text-neutral-200 placeholder:text-neutral-600\"\n                                    placeholder=\"name@example.com\"\n                                    autoComplete=\"email\"\n                                />\n                            </div>\n                            {errors.email && <p className=\"text-xs text-rose-400 mt-1.5 ml-1\">{errors.email}</p>}\n                        </div>\n\n                        <div>\n                            <label className=\"block text-xs font-medium text-neutral-400 mb-1.5 ml-1\">Password</label>\n                            <div className={`flex items-center px-3 py-2.5 rounded-lg border transition-all ${errors.password ? \"bg-rose-950/10 border-rose-500/50\" : \"bg-[#09090b] border-white/10 focus-within:border-white/30\"}`}>\n                                <input\n                                    name=\"password\"\n                                    type=\"password\"\n                                    value={form.password}\n                                    onChange={handleChange}\n                                    className=\"bg-transparent text-sm w-full outline-none text-neutral-200 placeholder:text-neutral-600\"\n                                    placeholder=\"••••••••\"\n                                    autoComplete=\"current-password\"\n                                />\n                            </div>\n                            {errors.password && <p className=\"text-xs text-rose-400 mt-1.5 ml-1\">{errors.password}</p>}\n                        </div>\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full py-3 text-sm font-bold bg-white text-black rounded-lg hover:bg-neutral-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-[0.98] mt-2\"\n                        >\n                            {loading ? \"Signing in...\" : \"Sign In\"}\n                        </button>\n                    </form>\n\n                    {serverMsg && (\n                        <div className=\"mt-4 p-3 rounded-lg bg-rose-500/10 border border-rose-500/20 text-rose-400 text-sm text-center\">\n                            {serverMsg}\n                        </div>\n                    )}\n                </div>\n\n                {/* Footer Link */}\n                <p className=\"text-center text-sm text-neutral-500\">\n                    Don’t have an account?{\" \"}\n                    <button onClick={() => router.push(\"/register\")} className=\"text-white hover:underline underline-offset-4 decoration-neutral-700 transition-all\">\n                        Sign up\n                    </button>\n                </p>\n            </div>\n        </main>\n    );\n}"],"names":[],"mappings":"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"}}]
}